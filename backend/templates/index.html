{% extends 'base.html' %}
{% load static %}
{% load product_images %}

{% block title %}{% if search_query %}Buscar{% elif category %}{{ category.name }}{% else %}Inicio - MUXDRY{% endif %}{% endblock %}

{% block content %}
<!-- Section 1: Carrusel -->
<section class="carousel-section" id="inicio">
    <div class="carousel-container">
        <div class="carousel-slide active">
            <img src="{% static 'assets/Banner/mux-1.png' %}" alt="Oferta 1">
        </div>
        <div class="carousel-slide">
            <img src="{% static 'assets/Banner/mux-2.png' %}" alt="Oferta 2">
        </div>
        <div class="carousel-slide">
            <img src="{% static 'assets/Banner/mux-3.png' %}" alt="Oferta 3">
        </div>
        <button class="carousel-btn prev-btn"><i class="fas fa-chevron-left"></i></button>
        <button class="carousel-btn next-btn"><i class="fas fa-chevron-right"></i></button>
        <div class="carousel-dots">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
    </div>
</section>

<!-- Section 2: Product Grid -->
<section class="product-section" id="nuestros-productos">
    <div class="section-title">
        <h2>{% if search_query %}Resultados para "{{ search_query }}"{% elif category %}{{ category.name }}{% else %}Nuestros Productos{% endif %}</h2>
        <span class="subtitle">{% if not products and not search_query and not category %}Calidad y variedad para todos los gustos{% elif not products %}No hay productos para mostrar.{% else %}Calidad y variedad para todos los gustos{% endif %}</span>
    </div>
    <div class="product-grid">
        {% for product in products %}
        <div class="product-card">
            {% if product.is_featured %}<div class="product-badge">Destacado</div>{% elif product.is_new %}<div class="product-badge">Nuevo</div>{% elif product.is_on_sale %}<div class="product-badge">Oferta</div>{% endif %}
            <div class="product-image">
                <img src="{% product_image_url product %}" alt="{{ product.name }}" class="product-main-img">
                <img src="{% product_hover_image_url product %}" alt="{{ product.name }}" class="product-hover-img">
                <div class="product-actions">
                    <a href="{% url 'products:product_detail' product.slug %}">
                        <button type="button" class="quick-view" title="Ver producto"><i class="fas fa-eye"></i></button>
                    </a>
                    <button type="button" class="add-to-wishlist"><i class="far fa-heart"></i></button>
                    <form method="post" action="{% url 'orders:add_to_cart' %}" class="add-to-cart-form" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <input type="hidden" name="quantity" value="1">
                        <button type="submit" class="add-to-cart" title="Añadir al carrito"><i class="fas fa-shopping-cart"></i></button>
                    </form>
                </div>
            </div>
            <div class="product-info">
                <h3 class="product-title">{{ product.name }}</h3>
                <div class="product-rating" title="{{ product.avg_rating|default:0 }} estrellas · {{ product.review_count|default:0 }} reseñas · {{ product.sales_count|default:0 }} vendidos">
                    {% with avg=product.avg_rating|default:0 %}
                    {% for i in "12345" %}
                    {% if forloop.counter <= avg %}<i class="fas fa-star"></i>
                    {% elif forloop.counter|add:"-1" < avg %}<i class="fas fa-star-half-alt"></i>
                    {% else %}<i class="far fa-star"></i>{% endif %}
                    {% endfor %}
                    {% endwith %}
                    <span>({{ product.sales_count|default:0 }} vendidos)</span>
                </div>
                <div class="product-price">
                    <span class="current-price">${{ product.price }}</span>
                    {% if product.old_price %}<span class="old-price">${{ product.old_price }}</span>{% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        {% if not search_query and not category %}
        <p class="no-products">No hay productos cargados. Ejecute <code>python manage.py seed_products</code>.</p>
        {% else %}
        <p class="no-products">No se encontraron productos.</p>
        {% endif %}
        {% endfor %}
    </div>

    {% if not category and not search_query %}
    <div class="section-title section-title--coming" style="margin-top: 50px;">
        <h2>Próximamente</h2>
        <span class="subtitle">Productos que estarán disponibles en un futuro</span>
    </div>
    <div class="product-grid product-grid--coming">
        <div class="product-card product-card--coming">
            <div class="product-badge product-badge--coming">Próximamente</div>
            <div class="product-image product-image--placeholder">
                <span class="product-placeholder-icon"><i class="fas fa-box-open"></i></span>
            </div>
            <div class="product-info">
                <h3 class="product-title">Disponible en un futuro</h3>
                <p class="product-coming-text">Estamos trabajando para ofrecerte más opciones. Muy pronto.</p>
            </div>
        </div>
        <div class="product-card product-card--coming">
            <div class="product-badge product-badge--coming">Próximamente</div>
            <div class="product-image product-image--placeholder">
                <span class="product-placeholder-icon"><i class="fas fa-box-open"></i></span>
            </div>
            <div class="product-info">
                <h3 class="product-title">Disponible en un futuro</h3>
                <p class="product-coming-text">Nuevos productos en camino. Mantente atento.</p>
            </div>
        </div>
        <div class="product-card product-card--coming">
            <div class="product-badge product-badge--coming">Próximamente</div>
            <div class="product-image product-image--placeholder">
                <span class="product-placeholder-icon"><i class="fas fa-box-open"></i></span>
            </div>
            <div class="product-info">
                <h3 class="product-title">Disponible en un futuro</h3>
                <p class="product-coming-text">Próximamente disponibles en nuestra tienda.</p>
            </div>
        </div>
        <div class="product-card product-card--coming">
            <div class="product-badge product-badge--coming">Próximamente</div>
            <div class="product-image product-image--placeholder">
                <span class="product-placeholder-icon"><i class="fas fa-box-open"></i></span>
            </div>
            <div class="product-info">
                <h3 class="product-title">Disponible en un futuro</h3>
                <p class="product-coming-text">Estamos ampliando nuestro catálogo. Vuelve pronto.</p>
            </div>
        </div>
    </div>
    {% endif %}
</section>

{% if not category and not search_query %}
<!-- Producto más demandado - Carrusel profesional -->
{% if viral_products %}
<section class="viral-carousel-section" id="mas-demandado">
    <div class="viral-carousel-container">
        <div class="viral-carousel-badge"><i class="fas fa-fire"></i> Más demandado</div>
        <div class="viral-carousel">
            {% for product in viral_products %}
            <div class="viral-slide {% if forloop.first %}active{% endif %}" data-slide="{{ forloop.counter0 }}">
                <div class="viral-slide-content">
                    <div class="viral-slide-image">
                        <a href="{% url 'products:product_detail' product.slug %}">
                            <img src="{% product_image_url product %}" alt="{{ product.name }}">
                        </a>
                    </div>
                    <div class="viral-slide-info">
                        <h2 class="viral-slide-title">{{ product.name }}</h2>
                        <p class="viral-slide-slogan">Calidad y efectividad para el cuidado de la hiperhidrosis</p>
                        <div class="viral-slide-price">${{ product.price }}{% if product.old_price %} <span class="viral-slide-old">${{ product.old_price }}</span>{% endif %}</div>
                        <a href="{% url 'products:product_detail' product.slug %}" class="viral-slide-cta">Ver producto</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% if viral_products|length > 1 %}
        <button type="button" class="viral-carousel-btn viral-prev" aria-label="Anterior"><i class="fas fa-chevron-left"></i></button>
        <button type="button" class="viral-carousel-btn viral-next" aria-label="Siguiente"><i class="fas fa-chevron-right"></i></button>
        <div class="viral-carousel-dots">
            {% for product in viral_products %}
            <span class="viral-dot {% if forloop.first %}active{% endif %}" data-slide="{{ forloop.counter0 }}"></span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>
{% endif %}

<!-- Noticias - Layout Multimax -->
<section class="news-section" id="noticias">
    <div class="news-container">
        <div class="section-title">
            <h2>Noticias</h2>
            <span class="subtitle">Novedades y tendencias en antitranspirantes</span>
        </div>
        <div class="news-layout">
            <article class="news-featured">
                <a href="{% url 'home' %}#ofertas-especiales" class="news-featured-banner">
                    <img src="{% static 'assets/Banner/mux-2.png' %}" alt="MUXDRY - Envío gratis">
                    <div class="news-featured-overlay">
                        <span class="news-featured-slogan">MUXDRY</span>
                        <span class="news-featured-tagline">Envío gratis a nivel nacional en compras superiores a $55</span>
                    </div>
                </a>
                <div class="news-featured-meta">
                    <span class="news-featured-cat">Noticias</span>
                    <span class="news-featured-date">enero 27, 2026</span>
                </div>
                <h3 class="news-featured-title">MUXDRY: Envío gratis y la mejor tecnología antitranspirante en todo el país</h3>
                <p class="news-featured-excerpt">Ser parte de MUXDRY te permite acceder a los mejores antitranspirantes del mercado. Drysol, Xerac AC, Duradry y más marcas reconocidas para el cuidado de la hiperhidrosis, con envío gratis en compras superiores a $55.</p>
                <a href="{% url 'home' %}#ofertas-especiales" class="news-featured-link">Leer más <i class="fas fa-arrow-right"></i></a>
            </article>
            <div class="news-sidebar">
                <article class="news-item">
                    <a href="{% url 'home' %}#ofertas-especiales" class="news-item-img"><img src="{% static 'assets/Banner/mux-1.png' %}" alt="Envío"></a>
                    <div class="news-item-body">
                        <span class="news-item-cat">Noticias</span>
                        <h4><a href="{% url 'home' %}#ofertas-especiales">MUXDRY: Envío gratis en todo el país</a></h4>
                        <span class="news-item-date">enero 26, 2026</span>
                    </div>
                </article>
                <article class="news-item">
                    <a href="{% url 'home' %}#nuestros-productos" class="news-item-img"><img src="{% static 'assets/Banner/mux-2.png' %}" alt="Productos"></a>
                    <div class="news-item-body">
                        <span class="news-item-cat">Noticias</span>
                        <h4><a href="{% url 'home' %}#nuestros-productos">Ampliamos catálogo con nuevos antitranspirantes</a></h4>
                        <span class="news-item-date">enero 20, 2026</span>
                    </div>
                </article>
                <article class="news-item">
                    <a href="#contacto-footer" class="news-item-img"><img src="{% static 'assets/Banner/mux-3.png' %}" alt="Atención"></a>
                    <div class="news-item-body">
                        <span class="news-item-cat">Noticias</span>
                        <h4><a href="#contacto-footer">Atención personalizada y asesoría profesional</a></h4>
                        <span class="news-item-date">enero 15, 2026</span>
                    </div>
                </article>
                <article class="news-item">
                    <a href="{% url 'home' %}#mas-demandado" class="news-item-img"><img src="{% static 'assets/Banner/mux-1.png' %}" alt="Producto más vendido"></a>
                    <div class="news-item-body">
                        <span class="news-item-cat">Noticias</span>
                        <h4><a href="{% url 'home' %}#mas-demandado">Descubre nuestro producto más demandado</a></h4>
                        <span class="news-item-date">enero 10, 2026</span>
                    </div>
                </article>
                <a href="{% url 'home' %}#noticias" class="news-ver-todas">Ver todas las noticias</a>
            </div>
        </div>
    </div>
</section>

<!-- Ofertas especiales -->
<section class="offers-section" id="ofertas-especiales">
    <div class="offers-container">
        <div class="section-title">
            <h2>Ofertas especiales</h2>
            <span class="subtitle">Promociones y beneficios para ti</span>
        </div>
        <div class="offers-grid">
            <div class="offer-card">
                <div class="offer-icon"><i class="fas fa-truck"></i></div>
                <h3>Envío gratis</h3>
                <p>En compras superiores a $55</p>
                <a href="{% url 'home' %}#nuestros-productos" class="offer-cta">Ver productos</a>
            </div>
            <div class="offer-card">
                <div class="offer-icon"><i class="fas fa-percent"></i></div>
                <h3>Productos en oferta</h3>
                <p>Los mejores precios en antitranspirantes</p>
                <a href="{% url 'home' %}#nuestros-productos" class="offer-cta">Comprar ahora</a>
            </div>
            <div class="offer-card">
                <div class="offer-icon"><i class="fas fa-headset"></i></div>
                <h3>Atención personalizada</h3>
                <p>Asesoría y seguimiento de tu pedido</p>
                <a href="#contacto-footer" class="offer-cta">Contáctanos</a>
            </div>
        </div>
    </div>
</section>

<!-- Contáctanos -->
<section class="contact-section" id="contacto-footer">
    <div class="contact-container">
        <div class="section-title">
            <h2>Contáctanos</h2>
            <span class="subtitle">Escríbenos y te responderemos a la brevedad</span>
        </div>
        <div class="contact-layout">
            <form class="contact-form" method="post" action="{% url 'contact' %}">
                {% csrf_token %}
                {% if messages %}
                <div class="contact-messages">
                    {% for message in messages %}
                    <p class="contact-message contact-message--{{ message.tags }}">{{ message }}</p>
                    {% endfor %}
                </div>
                {% endif %}
                <div class="form-row">
                    <label for="contact-name">Nombre</label>
                    <input type="text" id="contact-name" name="name" required placeholder="Tu nombre">
                </div>
                <div class="form-row">
                    <label for="contact-email">Email</label>
                    <input type="email" id="contact-email" name="email" required placeholder="tu@email.com">
                </div>
                <div class="form-row">
                    <label for="contact-subject">Asunto</label>
                    <input type="text" id="contact-subject" name="subject" placeholder="Asunto del mensaje">
                </div>
                <div class="form-row">
                    <label for="contact-message">Mensaje</label>
                    <textarea id="contact-message" name="message" rows="5" required placeholder="Escribe tu mensaje..."></textarea>
                </div>
                <button type="submit" class="contact-submit"><i class="fas fa-paper-plane"></i> Enviar mensaje</button>
            </form>
            <div class="contact-map-wrap">
                <h3 class="contact-map-title">Dónde estamos</h3>
                <p class="contact-address">Visita nuestra ubicación o escríbenos por el formulario.</p>
                <a href="https://maps.app.goo.gl/7aexHyrDbo6Abfrn7" target="_blank" rel="noopener noreferrer" class="contact-map-link"><i class="fas fa-map-marker-alt"></i> Ver ubicación en Google Maps</a>
                <div class="contact-map-embed">
                    <iframe
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3922.9!2d-66.8827!3d10.4726!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTDCsDI4JzIxLjQiTiA2NsKwNTInMDEuNyJX!5e0!3m2!1ses!2sve!4v1707000000"
                        width="100%"
                        height="300"
                        style="border:0; border-radius:8px;"
                        allowfullscreen=""
                        loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"
                        title="Ubicación MUXDRY - Bello Monte">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}
{% endblock %}

{% block extra_css %}
{% if not category and not search_query %}
<style>
/* Producto más demandado - Carrusel profesional tipo RIBELLE */
.viral-carousel-section { padding: 2.5rem 1rem 4rem; background: #f8f9fa; }
.viral-carousel-container { max-width: 1100px; margin: 0 auto; position: relative; }
.viral-carousel-badge { display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, #0A2B32 0%, #284660 100%); color: #fff; padding: 0.5rem 1.25rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600; margin-bottom: 1.5rem; }
.viral-carousel { position: relative; background: #fff; border-radius: 16px; overflow: hidden; box-shadow: 0 8px 32px rgba(0,0,0,0.1); border: 1px solid #e5e9ec; }
.viral-slide { display: none; }
.viral-slide.active { display: block; animation: viralFadeIn 0.4s ease; }
@keyframes viralFadeIn { from { opacity: 0; } to { opacity: 1; } }
.viral-slide-content { display: grid; grid-template-columns: 1.2fr 0.8fr; min-height: 380px; align-items: center; }
@media (max-width: 768px) { .viral-slide-content { grid-template-columns: 1fr; min-height: auto; } }
.viral-slide-image { background: #f5f6f8; padding: 2rem; display: flex; align-items: center; justify-content: center; }
.viral-slide-image img { max-width: 100%; max-height: 340px; object-fit: contain; border-radius: 8px; }
.viral-slide-info { padding: 2.5rem 3rem; background: #fff; display: flex; flex-direction: column; justify-content: center; }
.viral-slide-title { font-size: 1.75rem; color: #0A2B32; margin-bottom: 0.5rem; font-weight: 700; }
.viral-slide-slogan { font-size: 0.95rem; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 1rem; }
.viral-slide-price { font-size: 1.5rem; font-weight: 700; color: #0A2B32; margin-bottom: 1.25rem; }
.viral-slide-old { font-size: 1rem; color: #999; text-decoration: line-through; font-weight: 400; margin-left: 0.5rem; }
.viral-slide-cta { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.9rem 1.75rem; background: #0A2B32; color: #fff; border-radius: 8px; font-weight: 600; text-decoration: none; width: fit-content; transition: background 0.2s; }
.viral-slide-cta:hover { background: #0d3840; color: #fff; }
.viral-carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 48px; height: 48px; border-radius: 50%; border: none; background: #fff; box-shadow: 0 2px 12px rgba(0,0,0,0.15); cursor: pointer; color: #0A2B32; font-size: 1.1rem; z-index: 10; transition: background 0.2s, box-shadow 0.2s; }
.viral-carousel-btn:hover { background: #0A2B32; color: #fff; box-shadow: 0 4px 16px rgba(0,0,0,0.2); }
.viral-prev { left: -24px; }
.viral-next { right: -24px; }
@media (max-width: 768px) { .viral-prev { left: 12px; } .viral-next { right: 12px; } .viral-carousel-btn { width: 40px; height: 40px; font-size: 1rem; } }
.viral-carousel-dots { display: flex; justify-content: center; gap: 8px; margin-top: 1.25rem; }
.viral-dot { width: 10px; height: 10px; border-radius: 50%; background: #ddd; cursor: pointer; transition: background 0.2s; }
.viral-dot.active { background: #0A2B32; width: 28px; border-radius: 5px; }
/* Noticias - Layout Multimax */
.news-section { padding: 3rem 1rem 4rem; background: #fff; }
.news-container { max-width: 1100px; margin: 0 auto; }
.news-layout { display: grid; grid-template-columns: 1fr 360px; gap: 2rem; margin-top: 2rem; align-items: start; }
@media (max-width: 900px) { .news-layout { grid-template-columns: 1fr; } }
.news-featured { background: #fff; }
.news-featured-banner { display: block; position: relative; border-radius: 12px; overflow: hidden; background: linear-gradient(135deg, #0A2B32 0%, #284660 100%); }
.news-featured-banner img { width: 100%; height: 280px; object-fit: cover; display: block; }
.news-featured-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 2rem; background: linear-gradient(transparent, rgba(0,0,0,0.7)); color: #fff; }
.news-featured-slogan { font-size: 1.5rem; font-weight: 700; display: block; margin-bottom: 0.25rem; }
.news-featured-tagline { font-size: 0.95rem; opacity: 0.95; }
.news-featured-meta { display: flex; justify-content: space-between; margin-top: 1rem; font-size: 0.85rem; color: #6c757d; }
.news-featured-title { font-size: 1.35rem; color: #0A2B32; margin: 0.75rem 0; font-weight: 700; line-height: 1.3; }
.news-featured-excerpt { color: #6c757d; font-size: 0.95rem; line-height: 1.5; margin-bottom: 1rem; }
.news-featured-link { color: #0A2B32; font-weight: 600; font-size: 0.95rem; text-decoration: none; display: inline-flex; align-items: center; gap: 0.35rem; }
.news-featured-link:hover { text-decoration: underline; }
.news-sidebar { display: flex; flex-direction: column; gap: 1.25rem; }
.news-item { display: flex; gap: 1rem; align-items: flex-start; padding-bottom: 1.25rem; border-bottom: 1px solid #eee; }
.news-item:last-of-type { border-bottom: none; padding-bottom: 0; }
.news-item-img { flex-shrink: 0; width: 90px; height: 90px; border-radius: 8px; overflow: hidden; }
.news-item-img img { width: 100%; height: 100%; object-fit: cover; }
.news-item-body { min-width: 0; }
.news-item-cat { font-size: 0.75rem; color: #6c757d; display: block; margin-bottom: 0.25rem; }
.news-item-body h4 { font-size: 0.95rem; margin: 0 0 0.35rem 0; font-weight: 600; line-height: 1.3; }
.news-item-body h4 a { color: #0A2B32; text-decoration: none; }
.news-item-body h4 a:hover { text-decoration: underline; }
.news-item-date { font-size: 0.8rem; color: #6c757d; }
.news-ver-todas { display: inline-block; margin-top: 1rem; padding: 12px 24px; background: #0A2B32; color: #fff; border-radius: 8px; font-weight: 600; text-decoration: none; text-align: center; transition: background 0.2s; }
.news-ver-todas:hover { background: #0d3840; color: #fff; }
.offers-section { padding: 3rem 1rem 4rem; background: linear-gradient(180deg, #f8f9fa 0%, #fff 100%); }
.offers-container { max-width: 1000px; margin: 0 auto; }
.offers-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.5rem; margin-top: 2rem; }
.offer-card {
    background: #fff; border-radius: 12px; padding: 2rem;
    box-shadow: 0 4px 16px rgba(0,0,0,0.06); border: 1px solid #e5e9ec;
    text-align: center; transition: transform 0.2s, box-shadow 0.2s;
}
.offer-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0,0,0,0.08); }
.offer-icon { width: 56px; height: 56px; margin: 0 auto 1rem; background: linear-gradient(135deg, #0A2B32 0%, #284660 100%); color: #fff; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
.offer-card h3 { font-size: 1.2rem; color: #0A2B32; margin-bottom: 0.5rem; }
.offer-card p { color: #6c757d; font-size: 0.95rem; margin-bottom: 1rem; }
.offer-cta { display: inline-block; padding: 0.6rem 1.2rem; background: #0A2B32; color: #fff; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; }
.offer-cta:hover { background: #0d3840; color: #fff; }
.contact-section { padding: 3rem 1rem 4rem; background: #f5f6f8; }
.contact-container { max-width: 1000px; margin: 0 auto; }
.contact-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 2.5rem; align-items: start; margin-top: 2rem; }
@media (max-width: 768px) { .contact-layout { grid-template-columns: 1fr; } }
.contact-form { background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
.contact-form .form-row { margin-bottom: 1.25rem; }
.contact-form label { display: block; margin-bottom: 0.4rem; font-weight: 600; color: #0A2B32; }
.contact-form input, .contact-form textarea { width: 100%; padding: 0.75rem 1rem; border: 1px solid #dee2e6; border-radius: 8px; font-size: 1rem; }
.contact-form input:focus, .contact-form textarea:focus { outline: none; border-color: #0A2B32; box-shadow: 0 0 0 3px rgba(10,43,50,0.1); }
.contact-submit { margin-top: 0.5rem; padding: 0.9rem 1.5rem; background: #0A2B32; color: #fff; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }
.contact-submit:hover { background: #0d3840; }
.contact-messages { margin-bottom: 1rem; }
.contact-message--success { color: #0a7c42; }
.contact-message--error { color: #c0392b; }
.contact-message--warning { color: #b8860b; }
.contact-map-wrap { background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
.contact-map-title { font-size: 1.2rem; color: #0A2B32; margin-bottom: 0.5rem; }
.contact-address { font-size: 0.95rem; color: #6c757d; margin-bottom: 0.75rem; }
.contact-map-link { display: inline-flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; padding: 0.5rem 0; color: #0A2B32; font-weight: 600; text-decoration: none; }
.contact-map-link:hover { text-decoration: underline; }
.contact-map-link i { color: #284660; }
.contact-map-embed { border-radius: 8px; overflow: hidden; }
/* Línea decorativa naranja a izquierda y derecha de títulos (Noticias, Próximamente, etc.) */
.section-title { display: flex; flex-direction: column; align-items: center; text-align: center; }
.section-title h2 { display: flex; align-items: center; justify-content: center; gap: 12px; position: relative; }
.section-title h2::before,
.section-title h2::after { content: ''; display: inline-block; width: 48px; height: 2px; background: #e69c67; border-radius: 1px; flex-shrink: 0; position: static; left: auto; right: auto; top: auto; }
.section-title .subtitle { display: block; font-style: italic; color: #6c757d; }
.product-card { transition: transform 0.25s ease, box-shadow 0.25s ease; }
.product-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0,0,0,0.08); }
</style>
{% endif %}
{% endblock %}

{% block extra_js %}
{% if not category and not search_query %}
<script>
(function() {
    var viralCarousel = document.querySelector('.viral-carousel');
    if (!viralCarousel || !viralCarousel.querySelectorAll('.viral-slide').length) return;
    var slides = viralCarousel.querySelectorAll('.viral-slide');
    var dots = document.querySelectorAll('.viral-dot');
    var prevBtn = document.querySelector('.viral-prev');
    var nextBtn = document.querySelector('.viral-next');
    var current = 0;
    var total = slides.length;
    var autoInterval;
    function goTo(n) {
        current = (n + total) % total;
        slides.forEach(function(s, i) { s.classList.toggle('active', i === current); });
        dots.forEach(function(d, i) { d.classList.toggle('active', i === current); });
    }
    function startAuto() {
        if (autoInterval) clearInterval(autoInterval);
        autoInterval = setInterval(function() { goTo(current + 1); }, 5000);
    }
    if (prevBtn) prevBtn.addEventListener('click', function() { goTo(current - 1); startAuto(); });
    if (nextBtn) nextBtn.addEventListener('click', function() { goTo(current + 1); startAuto(); });
    dots.forEach(function(d, i) { d.addEventListener('click', function() { goTo(i); startAuto(); }); });
    startAuto();
})();
</script>
{% endif %}
{% endblock %}