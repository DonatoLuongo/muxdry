{% extends 'base.html' %}
{% load static %}

{% block title %}Nueva contraseña - MUXDRY{% endblock %}

{% block content %}
<div class="password-reset-confirm-wrap" style="max-width:480px;margin:2rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 2px 12px rgba(0,0,0,0.08);">
    {% if validlink %}
    <h1 style="font-size:1.5rem;color:#0A2B32;margin-bottom:0.5rem;"><i class="fas fa-lock"></i> Crear nueva contraseña</h1>
    <p style="color:#6c757d;font-size:0.95rem;margin-bottom:1.5rem;">Elige una contraseña segura de al menos 8 caracteres.</p>
    <form method="post" class="password-reset-confirm-form">
        {% csrf_token %}
        {% if form.non_field_errors %}
        <div style="padding:0.75rem;background:#f8d7da;color:#842029;border-radius:6px;margin-bottom:1rem;font-size:0.9rem;">
            {{ form.non_field_errors }}
        </div>
        {% endif %}
        <div style="margin-bottom:1rem;">
            <label for="id_new_password1" style="display:block;font-weight:600;margin-bottom:4px;">Nueva contraseña *</label>
            <input type="password" name="new_password1" id="id_new_password1" required autocomplete="new-password" style="width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:1rem;">
            {% if form.new_password1.errors %}<p style="color:#dc3545;font-size:0.85rem;margin-top:4px;">{{ form.new_password1.errors.0 }}</p>{% endif %}
        </div>
        <div style="margin-bottom:1rem;">
            <label for="id_new_password2" style="display:block;font-weight:600;margin-bottom:4px;">Confirmar contraseña *</label>
            <input type="password" name="new_password2" id="id_new_password2" required autocomplete="new-password" style="width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:1rem;">
            {% if form.new_password2.errors %}<p style="color:#dc3545;font-size:0.85rem;margin-top:4px;">{{ form.new_password2.errors.0 }}</p>{% endif %}
        </div>
        <button type="submit" style="width:100%;padding:12px;background:#0A2B32;color:#fff;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:1rem;">
            <i class="fas fa-check"></i> Restablecer contraseña
        </button>
    </form>
    {% else %}
    <div style="text-align:center;">
        <p style="color:#dc3545;font-size:1rem;">El enlace ha expirado o ya fue usado. Por favor, solicita uno nuevo.</p>
        <a href="{% url 'password_reset' %}" style="display:inline-block;margin-top:1rem;padding:10px 20px;background:#0A2B32;color:#fff;border-radius:8px;text-decoration:none;font-weight:600;">Solicitar nuevo enlace</a>
    </div>
    {% endif %}
    <p style="margin-top:1.5rem;text-align:center;">
        <a href="{% url 'login' %}" style="color:#0A2B32;text-decoration:none;">&larr; Volver al inicio de sesión</a>
    </p>
</div>
{% endblock %}
